"use strict";var app=angular.module("zipfApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch","zipfApp.services"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl",controllerAs:"main",activetab:"home"}).otherwise({redirectTo:"/"})}]);angular.module("zipfApp").controller("MainCtrl",["$scope","$q","twitterService","wordCountService",function(a,b,c,d){a.tweets,a.wordCounts=[],c.initialize(),a.refreshTimeline=function(){c.getLatestTweets().then(function(b){a.tweets=b,d.getWordCounts(b).then(function(b){a.wordCounts=_.pairs(b),a.wordCounts.sort(function(a,b){return b[1]-a[1]}),a.$broadcast("Plot_Data_Ready"),a.turnOffLinearPlotDataListener(),a.turnOffLogPlotDataListener()})})},a.connectToTwitter=function(){c.connectTwitter().then(function(){c.isReady()&&$("#connectButton, #caution_copy").fadeOut(function(){a.refreshTimeline(),$("#getTimelineButton, #signOut, #after_twitter_connect").fadeIn()})})},a.signOut=function(){c.clearCache(),a.tweets.length=0,a.wordCounts.length=0,$("#getTimelineButton, #signOut, #after_twitter_connect").fadeOut(function(){$("#connectButton, #caution_copy").fadeIn()})},c.isReady()&&($("#connectButton, #caution_copy").hide(),$("#getTimelineButton, #signOut, #after_twitter_connect").show(),a.refreshTimeline())}]),angular.module("zipfApp.services",[]).factory("twitterService",["$q",function(a){var b=!1;return{initialize:function(){OAuth.initialize("NKVYp__QsQt8Bw3yXsnb7pifayg",{cache:!0}),b=OAuth.create("twitter")},isReady:function(){return b},connectTwitter:function(){var c=a.defer();return OAuth.popup("twitter",{cache:!0},function(a,d){a?console.log(a):(b=d,c.resolve())}),c.promise},clearCache:function(){OAuth.clearCache("twitter"),b=!1},getLatestTweets:function(){var c=a.defer(),d=250;b.get("/1.1/statuses/user_timeline.json?count="+d+"&include_rts=false").done(function(a){c.resolve(a)});return c.promise}}}]),angular.module("zipfApp.services").factory("wordCountService",function(){function a(){var a=d(),c=e(a.join(" ").toLowerCase()),f=c.split(" ");b(f)}function b(a){a.forEach(function(a){c(a)&&(g.hasOwnProperty(a)?g[a]+=1:g[a]=1)})}function c(a){return""!==a}function d(){return f.map(function(a){return a.text})}function e(a){var b=/@([a-z\d_]+)/gi,c=/#([a-z\d_]+)/gi,d=/((([A-Za-z]{3,9}:(?:\/\/)?)(?:[-;:&=\+\$,\w]+@)?[A-Za-z0-9.-]+|(?:www.|[-;:&=\+\$,\w]+@)[A-Za-z0-9.-]+)((?:\/[\+~%\/.\w-_]*)?\??(?:[-\+=&;%@.\w_]*)#?(?:[.\!\/\\w]*))?)/gi,e=/[-!$%^&*()_+|~=`{}\[\]:“”";'<>?,.\/]/g;return a.replace(b,"").replace(c,"").replace(d,"").replace(e,"")}var f,g={};return{getWordCounts:function(b){return f=b,new Promise(function(b,c){a(),b(g)})}}}),angular.module("zipfApp").directive("linearWordsPlot",function(){var a=600,b=500,c=d3.scale.linear(),d=d3.scale.linear(),e=d3.svg.axis(),f=d3.svg.axis(),g=50,h=4,i="#002C7C";return{restrict:"E",link:function(j,k,l){j.turnOffLinearPlotDataListener=j.$on("Plot_Data_Ready",function(){d3.select(k[0]).selectAll("*").remove();var l=j.wordCounts;d.domain([0,d3.max(l,function(a){return a[1]})+5]).range([b-g,0]),c.domain([0,l.length]).range([0,a-g-10]);var m=d3.select(k[0]).append("svg").attr("width",a).attr("height",b).attr("class","realPlot");m.selectAll("circle").data(l).enter().append("circle").attr("r",h).attr("fill",i).attr("cx",function(a,b){return c(b)+g+2}).attr("cy",function(a){return d(a[1])}),e.scale(c).orient("bottom").ticks(20),f.scale(d).orient("left").ticks(12),m.append("g").attr("class","axis").attr("transform","translate("+g+", 0)").call(f),m.append("g").attr("class","axis").attr("transform","translate("+g+","+(b-g)+")").call(e),m.append("text").attr("class","axisLabel").attr("x",a/2).attr("y",b-12).text("Rank"),m.append("text").attr("class","axisLabel").attr("text-anchor","end").attr("x",-120).attr("transform","rotate(-90)").attr("y",14).text("Frequency / # of occurences")})}}}),angular.module("zipfApp").directive("logPlot",function(){var a=600,b=500,c=d3.scale.log(),d=d3.scale.log(),e=d3.svg.axis(),f=d3.svg.axis(),g=50,h=4,i="#002C7C";return{restrict:"E",link:function(j,k,l){j.turnOffLogPlotDataListener=j.$on("Plot_Data_Ready",function(){d3.select(k[0]).selectAll("*").remove();var l=j.wordCounts;d.domain([1,d3.max(l,function(a){return a[1]})+5]).range([b-g,0]),c.domain([1,l.length]).range([0,a-g-10]);var m=d3.select(k[0]).append("svg").attr("width",a).attr("height",b).attr("class","realPlot");m.selectAll("circle").data(l).enter().append("circle").attr("r",h).attr("fill",i).attr("cx",function(a,b){return c(b+1)+g+2}).attr("cy",function(a){return d(a[1])-h/2}),e.scale(c).orient("bottom").tickFormat(""),f.scale(d).orient("left").tickFormat(""),m.append("g").attr("class","axis").attr("transform","translate("+g+", 0)").call(f),m.append("g").attr("class","axis").attr("transform","translate("+g+","+(b-g)+")").call(e),m.append("text").attr("class","axisLabel").attr("x",a/2).attr("y",b-12).text("log( Rank )"),m.append("text").attr("class","axisLabel").attr("text-anchor","end").attr("x",-120).attr("transform","rotate(-90)").attr("y",14).text("log ( Frequency )")})}}}),angular.module("zipfApp").run(["$templateCache",function(a){a.put("views/main.html",'<div class="article"> <div class="article--header"> <h1 class="article--header--title">THE ZIPF MYSTERY</h1> </div> <div class="article--content"> <!-- Initial paragraph --> <p class="article--content--body_text"> Ever read, listened to or watched something that sent you in a mind equals blown state? <a href="https://www.youtube.com/watch?v=fCn8zs912OE" target="_blank">The Zipf Mystery</a> by VSauce on YouTube is one of such things. The following 90 second clip from the original video explains what Zipf\'s law is. You should watch the full video if you haven\'t already.<br>This website allows you to run a Zipf\'s law analysis on your tweets. </p> <!-- End initial paragraph --> <!-- The video --> <iframe id="vsauceVid" width="820" height="461" src="https://www.youtube.com/embed/fCn8zs912OE?rel=0&amp;controls=0&amp;showinfo=0&amp;start=41&amp;end=118&amp;version=3" frameborder="0" allowfullscreen></iframe> <!-- The connect to twitter button --> <div class="article--content--twitter_connect" id="my_twitter"> <button type="button" class="btn btn-default btn_connect_twitter" ng-click="connectToTwitter()" id="connectButton"><i class="fa fa-twitter"></i>&nbsp;&nbsp;Analyze My Tweets</button> <button type="button" class="btn btn-default btn_skip" ng-click="signOut()" id="signOut" style="display : none">Disconnect Twitter</button> <div id="caution_copy"> You will be prompted to connect to your Twitter account in a pop up window <br> This site will never post anything on your behalf </div> </div> <!-- <button type="button" class="btn btn-default btn_skip"  onclick="window.location.href=\'#my_twitter\'">Skip to Analyze my tweets section</button> --> <hr class="article--content--sm_hr"> <!-- Stuff to display after connection to twitter is established --> <div id="after_twitter_connect"> <p class="article--content--body_text"> Two hundred (or less) of your latest tweets have been analyzed and plotted on a Linear - Linear Frequency vs Rank plot, and a Log - Log Frequency vs Rank Plot. If you\'re a human, your tweets, the expression of your thoughts should follow Zipf\'s law. Do they? </p> <!-- User tweet plots  --> <center><h1 class="article--content--heading">Linear-Linear Plot</h1></center> <linear-words-plot></linear-words-plot> <center><h1 class="article--content--heading">Log-Log Plot</h1></center> <log-plot></log-plot> <!-- user tweet plots end --> <p class="article--content--body_text"> What\'s amazing is how thoughts expressed by different individuals, in different languages on different subjects follow the same exact pattern. For example here\'s Zipf\'s law analysis of the developer\'s tweets. </p> <div class="article--content--small_title"><a href="http://www.twitter.com/NashVail" target="_blank">@NashVail</a>\'s Tweets</div> <img src="images/nv_linear.af337a00.png" height="424" width="622" alt="" class="plot_image"> <img src="images/nv_log.07640da0.png" height="428" width="622" alt="" class="plot_image"> <p class="article--content--body_text"> The resemblance is uncanny, isn\'t it? And if that doesn\'t daze you, you should check out the sources cited in the video description on YouTube. Like the Zipf\'s law analysis of ... </p> <div class="article--content--small_title">First three chapters of <i>The Adventures of Tom Sawyer</i></div> <img src="images/tomSawyerZipf.68577a2c.png" height="786" width="628" alt="" class="plot_image"> <div class="article--content--fig_labels">Source : <a href="http://www.slideshare.net/guest9fc47a/nlp-new-words" target="_blank">http://www.slideshare.net/guest9fc47a/nlp-new-words</a></div> <p class="quoted article--content--body_text">"It’s surprising that something as complex as reality should be conveyed by something as creative as language in such a predictable way..."</p> <p class="article--content--body_text"> Every person you will ever meet, despite of being born and brought up in completely different environment and situation than yours. Speaking a completely different language than yours. Maybe of a different gender and ethnicity than yours. Diespite of all these differences, will express themselves in an exact same pattern as you will. If that doesn’t blow your mind, you sir, have no emotions. </p> </div> <!-- End of stuff to show after a connection to twitter is established --> </div></div>')}]);